/* NyxNode
 * Author: Jérôme ODIER <jerome.odier@lpsc.in2p3.fr>
 * SPDX-License-Identifier: GPL-2.0-only (Mongoose backend) or GPL-3.0+
 */

/*--------------------------------------------------------------------------------------------------------------------*/

#include "../nyx_node_internal.h"

/*--------------------------------------------------------------------------------------------------------------------*/

nyx_number_t *nyx_number_new()
{
    /*----------------------------------------------------------------------------------------------------------------*/

    nyx_number_t *object = nyx_memory_alloc(sizeof(nyx_number_t));

    /*----------------------------------------------------------------------------------------------------------------*/

    object->base = NYX_OBJECT(NYX_TYPE_NUMBER);

    /*----------------------------------------------------------------------------------------------------------------*/

    object->value = 0.0;

    /*----------------------------------------------------------------------------------------------------------------*/

    return object;
}

/*--------------------------------------------------------------------------------------------------------------------*/

void nyx_number_free(nyx_number_t *object)
{
    nyx_memory_free(object);
}

/*--------------------------------------------------------------------------------------------------------------------*/

double nyx_number_get(const nyx_number_t *object)
{
    return object->value;
}

/*--------------------------------------------------------------------------------------------------------------------*/

bool nyx_number_set_alt(nyx_number_t *object, double value, bool notify)
{
    bool modified = \
    object->value != value;
    object->value = value;

    if(notify)
    {
        nyx_object_notify(&object->base, modified);
    }

    return modified;
}

/*--------------------------------------------------------------------------------------------------------------------*/

str_t nyx_number_to_string(const nyx_number_t *object)
{
    str_t result = nyx_double_dup(object->value);

    if(result == NULL)
    {
        result = nyx_string_dup("null");
    }

    return result;
}

/*--------------------------------------------------------------------------------------------------------------------*/
