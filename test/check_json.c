/*--------------------------------------------------------------------------------------------------------------------*/

#include <stdio.h>

#include "../src/nyx_node.h"

/*--------------------------------------------------------------------------------------------------------------------*/

int main(int argc, char **argv)
{
    if(argc != 2)
    {
        fprintf(stderr, "Syntax: %s <json string>\n", argv[0]);

        return 1;
    }

    /*----------------------------------------------------------------------------------------------------------------*/

    nyx_memory_initialize();

    /*----------------------------------------------------------------------------------------------------------------*/

    nyx_object_t *object = nyx_object_parse(argv[1]);

    if(object == NULL)
    {
        goto _err;
    }

    str_t string = nyx_object_to_string(object);

    printf("%s\n", string);

    nyx_memory_free(string);
    nyx_object_free(object);

    /*----------------------------------------------------------------------------------------------------------------*/

    nyx_memory_finalize();

    printf("[SUCCESS]\n\n");

    return 0;

_err:
    nyx_memory_finalize();

    printf("[ERROR]\n\n");

    return 1;
}

/*--------------------------------------------------------------------------------------------------------------------*/
